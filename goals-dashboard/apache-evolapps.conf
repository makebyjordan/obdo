<VirtualHost *:80>
    ServerName evolapps.pro
    ServerAlias www.evolapps.pro
    
    # Logs
    ErrorLog ${APACHE_LOG_DIR}/evolapps-error.log
    CustomLog ${APACHE_LOG_DIR}/evolapps-access.log combined
    
    # Proxy a la aplicaci√≥n Next.js en puerto 3000
    ProxyPreserveHost On
    ProxyPass / http://localhost:3000/
    ProxyPassReverse / http://localhost:3000/
    
    # WebSocket support
    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*)           ws://localhost:3000/$1 [P,L]
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /(.*)           http://localhost:3000/$1 [P,L]
    
    # Headers para proxy
    RequestHeader set X-Forwarded-Proto "http"
    RequestHeader set X-Forwarded-Port "80"
</VirtualHost>
